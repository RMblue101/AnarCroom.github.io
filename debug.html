<!DOCTYPE html>
<html>
<head>
    <title>Debug Chat Firebase</title>
    <link rel="stylesheet" href="anarcroom.css">
    <style>
        body { font-family: Arial; margin: 20px; }
        #logs { border: 1px solid #ccc; height: 300px; overflow: auto; padding: 10px; background: #f9f9f9; margin: 10px 0; }
        input, button { margin: 5px; padding: 5px; }
        .log-entry { margin: 5px 0; font-size: 12px; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
    </style>
</head>
<body>
    <h1>Debug: Anarcroom (cliente estático)</h1>

    <p>Esta página ajuda a testar a versão cliente do chat que usa <code>localStorage</code>.
    Não existe servidor — todas as mensagens são guardadas localmente no browser por sala.</p>

    <div>
        <input id="dbg_room" placeholder="Código da sala" value="TEST123">
        <input id="dbg_user" placeholder="Nome" value="DebugUser">
        <button onclick="dbgOpen()">Abrir Sala</button>
        <button onclick="dbgClear()">Limpar Mensagens (local)</button>
        <!-- Firebase removed: debug page now uses only localStorage -->
    </div>

    <div style="margin-top:10px;">Abra <code>chat.html?room=TEU_CODIGO</code> para testar em modo estático.</div>

    <script>
    function dbgOpen(){
        const r = document.getElementById('dbg_room').value.trim() || 'TEST123';
        const u = document.getElementById('dbg_user').value.trim() || 'DebugUser';
        window.location.href = `chat.html?room=${r}`;
    }
    function dbgClear(){
        const r = document.getElementById('dbg_room').value.trim() || 'TEST123';
        localStorage.removeItem('anarcroom_msgs_' + r);
        alert('Mensagens locais removidas para a sala ' + r);
        log(`Local messages cleared for ${r}`, 'success');
    }

    // --- logging helper ---
    function log(msg, type){
        const box = document.getElementById('logs') || (() => { const d=document.createElement('div'); d.id='logs'; document.body.appendChild(d); return d; })();
        const el = document.createElement('div'); el.className = 'log-entry ' + (type||'info');
        el.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
        box.appendChild(el);
        box.scrollTop = box.scrollHeight;
    }

    // Firebase removed: keep only localStorage-based debug helpers
    </script>
</body>
</html>
